:root {
    --bg-color: #080c10;
    --panel-bg: #0d1218;
    --border-color: #1f2a36;
    --accent: #00f0ff; /* Medical Cyan */
    --accent-dim: rgba(0, 240, 255, 0.1);
    --text-main: #ccddee;
    --text-muted: #5c6b7f;
    --font-stack: 'JetBrains Mono', monospace;
    --anim-speed: 0.2s;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    scrollbar-width: thin;
    scrollbar-color: var(--border-color) var(--bg-color);
}

body {
    background-color: var(--bg-color);
    color: var(--text-main);
    font-family: var(--font-stack);
    height: 100vh;
    overflow: hidden; /* Prevents full page scroll */
    font-size: 13px;
    line-height: 1.5;
}

/* === BACKGROUND FX === */
.bg-grid {
    position: fixed;
    width: 200%;
    height: 200%;
    background-image: 
        linear-gradient(var(--border-color) 1px, transparent 1px),
        linear-gradient(90deg, var(--border-color) 1px, transparent 1px);
    background-size: 40px 40px;
    opacity: 0.15;
    z-index: -1;
    transform: perspective(500px) rotateX(20deg) translateY(-100px) translateZ(-200px);
    animation: gridMove 100s linear infinite;
}

.vignette {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle, transparent 40%, rgba(0,0,0,0.8) 100%);
    pointer-events: none;
    z-index: 0;
}

@keyframes gridMove { 0% { transform: translateY(0); } 100% { transform: translateY(40px); } }

/* === MAIN LAYOUT === */
.main-interface {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    height: 100vh;
    padding: 15px;
    gap: 15px;
    max-width: 1600px;
    margin: 0 auto;
}

/* === TOP BAR === */
.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 10px;
    height: 40px;
    flex-shrink: 0;
}

.brand { font-weight: 700; letter-spacing: 2px; color: var(--accent); }
.version { font-size: 0.7em; color: var(--text-muted); margin-left: 10px; }
.indicator { display: inline-block; width: 8px; height: 8px; background: var(--accent); border-radius: 50%; margin-right: 8px; }
.blink { animation: blink 2s infinite; }

.meta-data { display: flex; gap: 20px; font-size: 0.85em; color: var(--text-muted); }
.highlight { color: var(--text-main); }

/* === CONTENT GRID === */
.content-grid {
    display: grid;
    grid-template-columns: 350px 1fr; /* Fixed Sidebar, Fluid Main */
    gap: 15px;
    flex-grow: 1;
    min-height: 0; /* Crucial for scrolling inside grid */
}

/* Left Sidebar */
.left-col {
    display: flex;
    flex-direction: column;
    gap: 15px;
    min-height: 0;
}

/* Right Main */
.right-col {
    display: flex;
    flex-direction: column;
    min-height: 0;
}

/* === PANELS === */
.panel {
    background: var(--panel-bg);
    border: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    padding: 15px;
    position: relative;
}

.visual-panel { flex-grow: 1; min-height: 0; }
.output-panel { height: 100%; }

.panel-head {
    font-size: 0.75em;
    color: var(--text-muted);
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 15px;
    padding-bottom: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    letter-spacing: 1px;
}

/* === INPUTS & CONTROLS === */
input, textarea {
    width: 100%;
    background: #05080a;
    border: 1px solid var(--border-color);
    color: var(--text-main);
    font-family: inherit;
    font-size: 0.9em;
    padding: 10px;
    outline: none;
    transition: var(--anim-speed);
}

input:focus, textarea:focus {
    border-color: var(--accent);
    box-shadow: 0 0 10px var(--accent-dim);
}

textarea { resize: none; }
label { display: block; font-size: 0.7em; color: var(--text-muted); margin-bottom: 5px; }

/* Toggles */
.toggle-switch { display: flex; gap: 2px; }
.toggle-switch button {
    background: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-muted);
    font-family: inherit;
    font-size: 0.8em;
    padding: 2px 8px;
    cursor: pointer;
}
.toggle-switch button.active { background: var(--accent-dim); color: var(--accent); border-color: var(--accent); }

/* Buttons */
.action-btn {
    margin-top: 10px;
    width: 100%;
    background: var(--accent);
    border: none;
    color: #000;
    font-weight: 700;
    font-family: inherit;
    padding: 12px;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
}

.action-btn:hover { background: #fff; box-shadow: 0 0 15px var(--accent); }
.action-btn:disabled { background: var(--border-color); color: var(--text-muted); cursor: not-allowed; box-shadow: none; }

.file-btn {
    display: block;
    width: 100%;
    border: 1px dashed var(--border-color);
    padding: 10px;
    text-align: center;
    cursor: pointer;
    font-size: 0.8em;
    color: var(--text-muted);
}
.file-btn:hover { border-color: var(--accent); color: var(--accent); }
.file-name { display: block; text-align: center; font-size: 0.7em; color: var(--accent); margin-top: 5px; }

/* === VISUAL PREVIEW AREA === */
.viewport {
    flex-grow: 1;
    background: #000;
    border: 1px solid var(--border-color);
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    min-height: 200px;
}

#preview {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    opacity: 0;
    transition: opacity 0.5s;
    position: relative;
    z-index: 2;
}
#preview.visible { opacity: 0.9; }

.placeholder-text { position: absolute; color: var(--border-color); letter-spacing: 2px; }

/* Decorative Crosshairs */
.crosshair { position: absolute; width: 10px; height: 10px; border: 1px solid var(--accent); z-index: 5; opacity: 0.5; }
.c-tl { top: 5px; left: 5px; border-right: none; border-bottom: none; }
.c-tr { top: 5px; right: 5px; border-left: none; border-bottom: none; }
.c-bl { bottom: 5px; left: 5px; border-right: none; border-top: none; }
.c-br { bottom: 5px; right: 5px; border-left: none; border-top: none; }

/* Scanning line */
.scan-overlay {
    position: absolute;
    top: -100%;
    left: 0;
    width: 100%;
    height: 10px;
    background: linear-gradient(to bottom, transparent, var(--accent), transparent);
    opacity: 0.3;
    animation: scan 3s linear infinite;
    z-index: 3;
    pointer-events: none;
}

/* === LOG OUTPUT === */
.log-scroll-area {
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 5px;
    font-size: 0.95em;
    color: var(--text-main);
}

.log-line { color: var(--text-muted); margin-bottom: 5px; }
.tps-badge { font-size: 0.8em; color: var(--accent); }

#output { line-height: 1.6; }
#output strong { color: #fff; font-weight: 700; }
#output p { margin-bottom: 10px; }
.cursor { color: var(--accent); animation: blink 1s steps(2) infinite; }

/* UTILS */
.hidden { display: none !important; }
@keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } }
@keyframes scan { 0% { top: -10%; } 100% { top: 110%; } }

/* RESPONSIVE */
@media (max-width: 900px) {
    .content-grid { grid-template-columns: 1fr; grid-template-rows: auto 1fr; }
    .main-interface { height: auto; min-height: 100vh; overflow-y: auto; }
    .left-col { min-height: auto; }
    .viewport { min-height: 250px; }
    .output-panel { height: 400px; }
}